"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _htmlEntities = require("html-entities");

var _consts = require("../consts");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var entities = new _htmlEntities.AllHtmlEntities();

var MathTag = function () {
  function MathTag(hexo) {
    _classCallCheck(this, MathTag);

    this.hexo = hexo;
  }

  _createClass(MathTag, [{
    key: "register",
    value: function register() {
      var tag = this.hexo.extend.tag;

      tag.register("math", this._transform.bind(this), { ends: true });
    }
  }, {
    key: "_transform",
    value: function _transform(args, content) {
      content = entities.encode(content.trim());
      var multiLine = /\n/.test(content);

      return multiLine ? "<span>$$" + content + "$$</span>" + _consts.MATH_MARKER : "<span>$" + content + "$</span>" + _consts.MATH_MARKER;
    }
  }]);

  return MathTag;
}();

exports.default = MathTag;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRhZy9tYXRoLmVzNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUVBLElBQU0sV0FBVyxtQ0FBWDs7SUFFZTtBQUNuQixXQURtQixPQUNuQixDQUFZLElBQVosRUFBa0I7MEJBREMsU0FDRDs7QUFDaEIsU0FBSyxJQUFMLEdBQVksSUFBWixDQURnQjtHQUFsQjs7ZUFEbUI7OytCQUlSO1VBQ0gsTUFBUSxLQUFLLElBQUwsQ0FBVSxNQUFWLENBQVIsSUFERzs7QUFFVCxVQUFJLFFBQUosQ0FBYSxNQUFiLEVBQXFCLEtBQUssVUFBTCxDQUFnQixJQUFoQixDQUFxQixJQUFyQixDQUFyQixFQUFpRCxFQUFFLE1BQU0sSUFBTixFQUFuRCxFQUZTOzs7OytCQUlBLE1BQU0sU0FBUztBQUN4QixnQkFBVSxTQUFTLE1BQVQsQ0FBZ0IsUUFBUSxJQUFSLEVBQWhCLENBQVYsQ0FEd0I7QUFFeEIsVUFBSSxZQUFZLEtBQUssSUFBTCxDQUFVLE9BQVYsQ0FBWixDQUZvQjs7QUFJeEIsYUFBTyx5QkFBdUIsMkNBQXZCLGVBQ3NCLDBDQUR0QixDQUppQjs7OztTQVJQIiwiZmlsZSI6InRhZy9tYXRoLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWxsSHRtbEVudGl0aWVzIH0gZnJvbSBcImh0bWwtZW50aXRpZXNcIjtcclxuaW1wb3J0IHsgTUFUSF9NQVJLRVIgfSBmcm9tIFwiLi4vY29uc3RzXCI7XHJcbmNvbnN0IGVudGl0aWVzID0gbmV3IEFsbEh0bWxFbnRpdGllcygpXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXRoVGFnIHtcclxuICBjb25zdHJ1Y3RvcihoZXhvKSB7XHJcbiAgICB0aGlzLmhleG8gPSBoZXhvO1xyXG4gIH1cclxuICByZWdpc3RlcigpIHtcclxuICAgIGxldCB7IHRhZyB9ID0gdGhpcy5oZXhvLmV4dGVuZDtcclxuICAgIHRhZy5yZWdpc3RlcihcIm1hdGhcIiwgdGhpcy5fdHJhbnNmb3JtLmJpbmQodGhpcyksIHsgZW5kczogdHJ1ZSB9KTtcclxuICB9XHJcbiAgX3RyYW5zZm9ybShhcmdzLCBjb250ZW50KSB7XHJcbiAgICBjb250ZW50ID0gZW50aXRpZXMuZW5jb2RlKGNvbnRlbnQudHJpbSgpKTtcclxuICAgIGxldCBtdWx0aUxpbmUgPSAvXFxuLy50ZXN0KGNvbnRlbnQpO1xyXG5cclxuICAgIHJldHVybiBtdWx0aUxpbmUgPyBgPHNwYW4+JCQke2NvbnRlbnR9JCQ8L3NwYW4+JHtNQVRIX01BUktFUn1gXHJcbiAgICAgICAgICAgICAgICAgICAgIDogYDxzcGFuPiQke2NvbnRlbnR9JDwvc3Bhbj4ke01BVEhfTUFSS0VSfWA7XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
