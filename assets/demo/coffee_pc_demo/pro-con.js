!function(){var e,t,n,i;e=10,n=function(e,t){return null==e&&(e=4),null==t&&(t=6),e+t},t=function(){function t(){}return t.prototype.data={mutex:1,empty:e,full:0,front:0,rear:0,buf:[]},t.prototype.init=function(){var t,n,i=this;for(t=0;e>t;)n=$('<div class="bufBox"><div class="bufCover">'+t+"</div>"+t+"</div>"),$("#buf").append(n),this.data.buf.push("e"),t++;return $("#produce").click(function(){return i.producer()}),$("#consume").click(function(){return i.consumer()})},t.prototype.p=function(e){return--e},t.prototype.v=function(e){return++e},t.prototype.produceItem=function(){return $('<p class="desPro">生产了产品</p>').insertBefore($("#des p:first")),"m"},t.prototype.consumeItem=function(){return $('<p class="desCon">消费了产品</p>').insertBefore($("#des p:first"))},t.prototype.enterItem=function(t){var n;return this.data.front=(this.data.front+1)%e,this.data.buf[this.data.front]=t,n="存入产品"+this.data.buf[this.data.front]+"到缓冲区"+this.data.front,$("<p class='desPro'>"+n+"</p>").insertBefore($("#des p:first")),$($(".bufCover")[this.data.front]).animate({height:"50px"})},t.prototype.removeItem=function(){var t;return this.data.rear=(this.data.rear+1)%e,this.data.buf[this.data.rear]="e",t="取出产品"+this.data.buf[this.data.rear]+"从缓冲区"+this.data.rear,$("<p class='desCon'>"+t+"</p>").insertBefore($("#des p:first")),$($(".bufCover")[this.data.rear]).animate({height:"0px"})},t.prototype.producer=function(){var t;return this.data.full===e?($("<p class='desSpe'>缓冲区已全满</p>").insertBefore($("#des p:first")),void 0):(t=this.produceItem(),this.data.empty=this.p(this.data.empty),this.data.mutex=this.p(this.data.mutex),this.enterItem(t),this.data.mutex=this.v(this.data.mutex),this.data.full=this.v(this.data.full))},t.prototype.consumer=function(){return this.data.empty===e?($("<p class='desSpe'>缓冲区已空</p>").insertBefore($("#des p:first")),void 0):(this.data.full=this.p(this.data.full),this.data.mutex=this.p(this.data.mutex),this.removeItem(),this.data.mutex=this.v(this.data.mutex),this.data.empty=this.v(this.data.empty),this.consumeItem())},t}(),i=new t,i.init()}.call(this);