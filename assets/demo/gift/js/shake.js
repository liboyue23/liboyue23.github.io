!function(e,t){function n(){if(this.hasDeviceMotion="ondevicemotion"in e,this.threshold=15,this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null,"function"==typeof t.CustomEvent)this.event=new t.CustomEvent("shake",{bubbles:!0,cancelable:!0});else{if("function"!=typeof t.createEvent)return!1;this.event=t.createEvent("Event"),this.event.initEvent("shake",!0,!0)}}n.prototype.reset=function(){this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null},n.prototype.start=function(){this.reset(),this.hasDeviceMotion&&e.addEventListener("devicemotion",this,!1)},n.prototype.stop=function(){this.hasDeviceMotion&&e.removeEventListener("devicemotion",this,!1),this.reset()},n.prototype.devicemotion=function(t){var n,i,r=t.accelerationIncludingGravity,o=0,a=0,s=0;return null===this.lastX&&null===this.lastY&&null===this.lastZ?(this.lastX=r.x,this.lastY=r.y,this.lastZ=r.z,void 0):(o=Math.abs(this.lastX-r.x),a=Math.abs(this.lastY-r.y),s=Math.abs(this.lastZ-r.z),(o>this.threshold&&a>this.threshold||o>this.threshold&&s>this.threshold||a>this.threshold&&s>this.threshold)&&(n=new Date,i=n.getTime()-this.lastTime.getTime(),i>1e3&&(e.dispatchEvent(this.event),this.lastTime=new Date)),this.lastX=r.x,this.lastY=r.y,this.lastZ=r.z,void 0)},n.prototype.handleEvent=function(e){return"function"==typeof this[e.type]?this[e.type](e):void 0};var i=new n;i&&i.start()}(window,document);